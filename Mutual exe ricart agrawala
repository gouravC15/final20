#include<stdio.h>
#include<stdlib.h>
struct site
{
int rq[2];
int ts;
};
int main()
{
struct site s[20];
int n,i,j,ii,jj,count=0;
printf("Enter the no of sites in the distributed system : ");
scanf("%d",&n);
for(i=0;i<n-2;i++)
{
s[i].rq[0]=i;
s[i].rq[1]=n-2;
}
s[i].rq[0]=i;
s[i].rq[1]=n-1;
i++;
s[i].rq[0]=i;
s[i].rq[1]=0;
printf("The REQUEST SET for %d nodes is as follows : \n",n);
for(j=0;j<n;j++)
{
printf("Node %d is (",j);
for(i=0;i<2;i++)
{
printf("%d",s[i].rq[i]);
}
printf(")\n");
}
printf("Enter the two nodes competing to enter the CS : \n");
scanf("%d%d",&ii,&jj);
printf("Enter the timestamps of the 2 nodes : \n");
scanf("%d%d",&s[ii].ts,&s[jj].ts);
for(i=0;i<2;i++)
{
for(j=0;j<2;j++)
{
if(s[ii].rq[i]==s[jj].rq[j]);
{
count++;
printf("Request message is sent to the site %d\n",n-2);
if(s[ii].ts<s[jj].ts)
{
printf("First site %d enters the CS\n",ii);
printf("Next site %d enters the CS\n",jj);
}
else
{
printf("First site %d enters the CS\n",jj);
printf("Next site %d enters the CS\n",ii);

}
break;
}
break;
}
break;
}
//system("pause");
}
